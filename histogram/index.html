<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Another D3 Tutorial</title>
    <link rel="stylesheet" href="styles.css">

</head>
<body>
    <!-- This example is from FCC: 
    - Learn to create a bar chart with D3 - A tutorial for beginners
    - https://www.freecodecamp.org/news/how-to-create-your-first-bar-chart-with-d3-js-a0e8ea2df386/
    -->
    <h1>Your first D3.js bar chart</h1>
    <!-- This "<div style="...">" was given from Stackoverflow to put a div around the svg to align center: https://stackoverflow.com/a/25185515 -->
    <div style="text-align: center;">
        <svg></svg>
    </div>
    
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <script>
        var svgWidth = 500;
        var svgHeight = 300;

        var svg = d3.select('svg')
            .attr("width", svgWidth)
            .attr("height", svgHeight)
            .attr("class", "bar-chart");
    </script>

    <script>
        var dataset = [80, 100, 56, 120, 180, 30, 40, 120, 160];

        var barPadding = 5;
        var barWidth = (svgWidth / dataset.length);

        /*
        selectAll()
        - haven't yet created any <rect> elements yet
            so this method returns an empty selection (an empty array)
        - however, we're going to create <rect> elements soon using:
            enter().append()

        - explaining how selectAll() works in combination with enter().append() is outside of te scope of this tutorial 
        - to understand it properly read (google) this article:
            "Understanding selectAll, data, enter, append sequence in D3.js"
        */ 
        var barChart = svg.selectAll("rect")
            /*      data()
            - we then chain the data() method and pass in our dataset. 
            - the data will end up dictating the heigh of each bar
            */
            .data(dataset)
            /*      enter()
            - next step is to chain the enter() mehtod
            - the enter() looks both at the dataset you passed into data() and at the selection we did with seletAll('rect') 
            - and then it tries to look for "matches" 
            - so it creates a mapping between your data and the DOM.

            - but rememeber, the selectAll('rect') method returned an empty selection,
             - as there are no <rect> elements in the DOM yet
            - however, the dataset has nine items 
            - so there are no "matches"

            - the enter() method then allows you to ceatae a new <rect> element in the DOM for each item in the dataset which doesn't yet have a correspoinding <rect> element.
            */
            .enter()
            /*      append()
            - we append a <rect> element for each of the items.  
            - as this method follows after enter(), it will actually be executed nine times, one for each data point that lacks a corresponding <rect> in the DOM.
            */
            .append("rect")

            /*      attr()
            - the next step is to decide the shape of each of the rectangles (our bars). 
            - we need to give it four attributes: 
                - height, width, x-position and y-position
            - w'll use attr() method for all of these
            */
            
            /*
            - the first parameter dictates which attribute want to add (the y-coordinate of the bar).  
            - In the second, we get access to a callback funciton in which we're going to return the value we want our attribute to have
            */
            .attr("y", function(d) {
                return svgHeight - d
            })
            /*
            - to make the bar stretch from this point and down to the bottom of the SVG container 
            -- give it a height equivalent to the value of the data point
            */
            .attr("height", function (d) {
                return d;
            })
            /*bar width 
            - passing in a simple expression as opposed to the calllback funcition 
            -- as we don't need access to the data point
            -- we're simply taking basis in the barWidth variable which we created further pu, which is the totla width of the container divided by the number of bars
            
            */
            .attr("width", barWidth - barPadding)
            .attr("transform", function (d, i) {
                /*var translate = [barWidth * i , 0];
                return "translate("+ translate +")"*/
                var xCoordinate = barWidth * i;
                return "translate("+ xCoordinate +")"
            });

        
    </script>
</body>
</html>